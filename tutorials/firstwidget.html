<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="twitter:site" content="@kivyframework">
    <meta name="color-scheme" content="dark light"> <!--tells web browser about which themes are supported -->
    <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>A Simple Paint App &mdash; Kivy 2.1.0 –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</title>
    <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/fresh.css" type="text/css" />
         
          <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script> 
            <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script> 
            <script src="../_static/jquery.js"></script> 
            <script src="../_static/underscore.js"></script> 
            <script src="../_static/doctools.js"></script> 
        
        <script>
            const currTheme = localStorage.getItem("theme");
            if(currTheme){
                document.documentElement.className = currTheme;
            } else if(window.matchMedia){
                document.documentElement.className = window.matchMedia('(prefers-color-scheme: dark)').matches ? "dark": "light";
            } else { // neither localStorage or window.matchMedia exists
                document.documentElement.className = "light"; //todo should dark theme be the fallback value instead ?
            }
        </script>
        <script type="text/javascript" src="../_static/jquery-effects-core-and-slide.js"></script>
        <script type="text/javascript" src="../_static/jquery.cookie.js"></script>
        <script type="text/javascript" src="../_static/kivy.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="Kivy 2.1.0 documentation" href="../index.html" />
    <link rel="up" title="Tutorials" href="../tutorials-index.html" />
    <link rel="next" title="Crash Course" href="crashcourse.html" />
    <link rel="prev" title="Pong Game Tutorial" href="pong.html" /> 
  </head>
  <body>

    <div id="topbar">
        <div id="topwrapper">
          <div id="toplogo">
              <a href="https://kivy.org/">
                  <img src="../_static/logo-kivy.png" alt="Kivy"/>
              </a>
          </div>
          <div id="topmenu">
              <ul class="navigation">
                  <li><a class="nav-guides" href="../gettingstarted/intro.html">–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞</a></li>
                  <li><a class="nav-garden" href="http://kivy-garden.github.io/">–°–∞–¥</a></li>
                  <li><a class="nav-api" href="../api-kivy.html">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ API</a></li>
                  <li><a class="nav-pdf" href="https://media.readthedocs.org/pdf/kivy/latest/kivy.pdf">PDF</a></li>
                  <li><a class="nav-wiki" href="http://wiki.kivy.org">Wiki</a></li>
                  <li id="li_themeToggleSwitch">
                        <button id="themeToggleSwitch" type="button">
                            <span class="vt-switch-check">
                                <span class="vt-switch-icon">
                                    <!--[-->
                                    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="sun">
                                        <path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path>
                                        <path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path>
                                        <path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path>
                                        <path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path>
                                        <path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path>
                                        <path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path>
                                        <path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path>
                                        <path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path>
                                        <path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path>
                                    </svg>
                                    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="moon">
                                        <path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path>
                                    </svg>
                                    <!--]-->
                                </span>
                            </span>
                        </button>

                  </li>
              </ul>
          </div>
        </div>
    </div>
<div id="contentall">
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3>–í–µ—Ä—Å–∏—è 2.1.0 </h3>
            <select id="version_selector"></select>
            <h3>–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫</h3>
            <form class="search" action="../search.html" method="get">
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
                <input type="text" class="text" name="q" />
                <button type="submit">üîç</button>
            </form>
          <!--
          <h3><a href="../index.html">–ü—Ä–æ—Å—Ç–æ–µ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –†–∏—Å–æ–≤–∞–Ω–∏—è</a></h3>
          <ul>
<li><a class="reference internal" href="#">–ü—Ä–æ—Å—Ç–æ–µ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –†–∏—Å–æ–≤–∞–Ω–∏—è</a><ul>
<li><a class="reference internal" href="#basic-considerations">Basic Considerations</a></li>
<li><a class="reference internal" href="#paint-widget">Paint Widget</a><ul>
<li><a class="reference internal" href="#initial-structure">Initial Structure</a></li>
<li><a class="reference internal" href="#adding-behaviour">Adding Behaviour</a></li>
<li><a class="reference internal" href="#bonus-points">Bonus Points</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          <h3><a href="../index.html">–û–≥–ª–∞–≤–ª–µ–Ω–∏–µ</a></h3>
          -->
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">–ì–∞–ª–µ—Ä–µ—è –ü—Ä–∏–º–µ—Ä–æ–≤</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples/gallery.html">–ì–∞–ª–µ—Ä–µ—è</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__3Drendering__main__py.html">–í—Ä–∞—â–∞—é—â–∞—è—Å—è 3D –ì–æ–ª–æ–≤–∞ –û–±–µ–∑—å—è–Ω—ã</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__animation__animate__py.html">–ê–Ω–∏–º–∞—Ü–∏—è –≤–∏–¥–∂–µ—Ç–∞</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__application__app_suite__py.html">–ù–∞–±–æ—Ä –ü–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª–µ–π –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–π</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__application__app_with_build__py.html">–ü—Ä–∏–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º build() + return</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__application__app_with_kv__py.html">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –∏–∑ .kv-—Ñ–∞–π–ª–∞</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__application__app_with_kv_in_template1__py.html">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ .kv –≤ –ö–∞—Ç–∞–ª–æ–≥–µ –®–∞–±–ª–æ–Ω–æ–≤</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__camera__main__py.html">–ü—Ä–∏–º–µ—Ä —Å –∫–∞–º–µ—Ä–æ–π</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__bezier__py.html">–ü—Ä–∏–º–µ—Ä –ë–µ–∑—å–µ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__canvas_stress__py.html">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ö–æ–ª—Å—Ç–∞</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__circle__py.html">–ü—Ä–∏–º–µ—Ä —Å –∫—Ä—É–≥–æ–º</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__fbo_canvas__py.html">–ü–æ–ª–æ—Ç–Ω–æ —Å –ë–ö–í</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__lines__py.html">–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç —Å –≥–ª–∞–¥–∫–æ–π –ª–∏–Ω–∏–µ–π</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__lines_extended__py.html">–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –õ–∏–Ω–∏–π</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__mesh__py.html">–¢–µ—Å—Ç —Å –º–µ—à</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__multitexture__py.html">–ü—Ä–∏–º–µ—Ä –ú—É–ª—å—Ç–∏—Ç–µ–∫—Å—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__repeat_texture__py.html">–ü–æ–≤—Ç–æ—Ä—è—Ç—å –¢–µ–∫—Å—Ç—É—Ä—É –ø—Ä–∏ –ò–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__rotation__py.html">–ü—Ä–∏–º–µ—Ä –ü–æ–≤–æ—Ä–æ—Ç–∞</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__stencil_canvas__py.html">–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –®–∞–±–ª–æ–Ω–∞</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__tesselate__py.html">–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ó–∞–º–æ—â–µ–Ω–∏—è</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__texture__py.html">–ü—Ä–∏–º–µ—Ä –û–±–µ—Ä—Ç–∫–∏ –¢–µ–∫—Å—Ç—É—Ä—ã –∏ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__camera_puzzle__py.html">–ü–∞–∑–ª –∏–∑ –¢–∞—Å–æ–≤–∞–Ω–Ω—ã—Ö –ö–∞–Ω–∞–ª–æ–≤ –ö–∞–º–µ—Ä—ã</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__kivycatalog__main__py.html">–ö–∞—Ç–∞–ª–æ–≥ Kivy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__multistroke__main__py.html">–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –£–∑–æ—Ä–æ–≤-–ø–∞—Ä–æ–ª–µ–π</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__pictures__main__py.html">–û—Å–Ω–æ–≤–Ω–æ–µ –°—Ä–µ–¥—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –†–∏—Å—É–Ω–∫–æ–≤</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__shadereditor__main__py.html">–†–µ–¥–∞–∫—Ç–æ—Ä –®–µ–π–¥–µ—Ä–æ–≤</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__showcase__main__py.html">–í–∏—Ç—Ä–∏–Ω–∞ –§—É–Ω–∫—Ü–∏–π Kivy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__touchtracer__main__py.html">–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ö–∞—Å–∞–Ω–∏–π</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/index.html">–ù–∞—á–∞–ª–æ –†–∞–±–æ—Ç—ã</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/intro.html">–í–≤–µ–¥–µ–Ω–∏–µ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/installation.html">–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Kivy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/first_app.html">–ü–µ—Ä–≤–æ–µ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/properties.html">–°–≤–æ–π—Å—Ç–≤–∞</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/rules.html">–Ø–∑—ã–∫ –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è kv</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/events.html">–°–æ–±—ã—Ç–∏—è</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/framework.html">–ù–µ –æ –≤–∏–¥–∂–µ—Ç–∞—Ö</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/layouts.html">–ú–∞–∫–µ—Ç—ã</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/drawing.html">–†–∏—Å–æ–≤–∞–Ω–∏–µ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/packaging.html">–£–ø–∞–∫–æ–≤–∫–∞</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/diving.html">–ü–æ–≥—Ä—É–∂–µ–Ω–∏–µ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide.html">–ü—Ä–æ–µ–∫—Ç Kivy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../philosophy.html">–§–∏–ª–æ—Å–æ—Ñ–∏—è</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute.html">–°–æ–¥–µ–π—Å—Ç–≤–∏–µ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html">–ß–∞—Å—Ç–æ –ó–∞–¥–∞–≤–∞–µ–º—ã–µ –í–æ–ø—Ä–æ—Å—ã</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contact.html">–°–≤—è–∂–∏—Ç–µ—Å—å —Å –ù–∞–º–∏</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guide-index.html">–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guide/basic.html">–û—Å–Ω–æ–≤—ã Kivy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/environment.html">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –°—Ä–µ–¥–æ–π</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/config.html">–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Kivy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/architecture.html">–û–±–∑–æ—Ä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/events.html">–°–æ–±—ã—Ç–∏—è –∏ –°–≤–æ–π—Å—Ç–≤–∞</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/inputs.html">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –í–≤–æ–¥–æ–º</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/widgets.html">–í–∏–¥–∂–µ—Ç—ã</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/graphics.html">–ì—Ä–∞—Ñ–∏–∫–∞</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/lang.html">–Ø–∑—ã–∫ kv</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/other-frameworks.html">–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –§—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/packaging.html">–£–ø–∞–∫–æ–≤–∫–∞ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/licensing.html">–õ–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –ü–∞–∫–µ—Ç–∞</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorials-index.html">–û–±—É—á–∞—é—â–∏–µ –ü—Ä–æ–≥—Ä–∞–º–º—ã</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="pong.html">–û–±—É—á–∞—é—â–∞—è –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ –ò–≥—Ä–µ –≤ –ü–æ–Ω–≥</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">–ü—Ä–æ—Å—Ç–æ–µ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –†–∏—Å–æ–≤–∞–Ω–∏—è</a></li>
<li class="toctree-l2"><a class="reference internal" href="crashcourse.html">–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–π –ö—É—Ä—Å</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api-index.html">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.html">Kivy framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy._metrics.html">Low level Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy._version.html">NO DOCUMENTATION (module kivy.uix.recycleview)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.animation.html">Animation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.app.html">Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.atlas.html">Atlas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.base.html">Kivy Base</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.cache.html">Cache manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.clock.html">Clock object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.compat.html">Compatibility module for Python 2.7 and &gt;= 3.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.config.html">Configuration object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.context.html">Context</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.core.html">Core Abstraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.core.audio.html">Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.core.camera.html">Camera</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.core.clipboard.html">Clipboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.core.gl.html">OpenGL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.core.image.html">Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.core.spelling.html">Spelling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.core.text.html">Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.core.text.markup.html">Text Markup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.core.text.text_layout.html">Text layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.core.video.html">Video</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.core.window.html">Window</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.deps.html">Kivy module for binary dependencies.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.effects.html">Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.effects.dampedscroll.html">Damped scroll effect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.effects.kinetic.html">Kinetic effect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.effects.opacityscroll.html">Opacity scroll effect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.effects.scroll.html">Scroll effect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.event.html">Event dispatcher</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.eventmanager.html">Event Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.factory.html">Factory object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.garden.html">–°–∞–¥</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.geometry.html">Geometry utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.gesture.html">Gesture recognition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.graphics.html">–ì—Ä–∞—Ñ–∏–∫–∞</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.graphics.cgl.html">CGL: standard C interface for OpenGL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.graphics.compiler.html">Graphics compiler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.graphics.context.html">Context management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.graphics.context_instructions.html">Context instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.graphics.fbo.html">Framebuffer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.graphics.gl_instructions.html">GL instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.graphics.instructions.html">Canvas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.graphics.opengl.html">OpenGL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.graphics.opengl_utils.html">OpenGL utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.graphics.scissor_instructions.html">Scissor Instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.graphics.shader.html">Shader</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.graphics.stencil_instructions.html">Stencil instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.graphics.svg.html">SVG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.graphics.tesselator.html">Tesselator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.graphics.texture.html">Texture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.graphics.transformation.html">Transformation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.html">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –í–≤–æ–¥–æ–º</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.factory.html">Motion Event Factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.motionevent.html">Motion Event</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.postproc.html">Input Postprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.postproc.calibration.html">Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.postproc.dejitter.html">Dejitter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.postproc.doubletap.html">Double Tap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.postproc.ignorelist.html">Ignore list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.postproc.retaintouch.html">Retain Touch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.postproc.tripletap.html">Triple Tap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.provider.html">Motion Event Provider</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.providers.html">Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.providers.androidjoystick.html">Android Joystick Input Provider</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.providers.hidinput.html">Native support for HID input from the linux kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.providers.leapfinger.html">Leap Motion - finger only</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.providers.linuxwacom.html">Native support of Wacom tablet from linuxwacom driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.providers.mactouch.html">Native support of MultitouchSupport framework for MacBook (MaxOSX platform)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.providers.mouse.html">Mouse provider implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.providers.mtdev.html">Native support for Multitouch devices on Linux, using libmtdev.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.providers.probesysfs.html">Auto Create Input Provider Config Entry for Available MT Hardware (linux only).</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.providers.tuio.html">TUIO Input Provider</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.providers.wm_common.html">Common definitions for a Windows provider</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.recorder.html">Input recorder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.input.shape.html">Motion Event Shape</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.interactive.html">Interactive launcher</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.lang.html">Kivy Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.lang.builder.html">Builder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.lang.parser.html">Parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.lib.html">External libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.lib.ddsfile.html">DDS File library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.lib.gstplayer.html">GstPlayer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.lib.mtdev.html">Python mtdev</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.loader.html">Asynchronous data loader</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.logger.html">Logger object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.metrics.html">Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.modules.html">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.modules.console.html">Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.modules.inspector.html">Inspector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.modules.joycursor.html">JoyCursor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.modules.keybinding.html">Keybinding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.modules.monitor.html">Monitor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.modules.recorder.html">Recorder module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.modules.screen.html">Screen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.modules.touchring.html">Touchring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.modules.webdebugger.html">Web Debugger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.multistroke.html">Multistroke gesture recognizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.network.html">Network support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.network.urlrequest.html">UrlRequest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.parser.html">Parser utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.properties.html">–°–≤–æ–π—Å—Ç–≤–∞</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.resources.html">Resources management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.storage.html">Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.storage.dictstore.html">Dictionary store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.storage.jsonstore.html">JSON store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.storage.redisstore.html">Redis Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.support.html">Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.tools.html">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.tools.packaging.html">–£–ø–∞–∫–æ–≤–∫–∞</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.tools.packaging.pyinstaller_hooks.html">Pyinstaller hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.html">–í–∏–¥–∂–µ—Ç—ã</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.accordion.html">Accordion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.actionbar.html">Action Bar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.anchorlayout.html">Anchor Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.behaviors.html">Behaviors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.behaviors.button.html">Button Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.behaviors.codenavigation.html">Code Navigation Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.behaviors.compoundselection.html">Compound Selection Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.behaviors.cover.html">Cover Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.behaviors.drag.html">Drag Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.behaviors.emacs.html">Emacs Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.behaviors.focus.html">Focus Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.behaviors.knspace.html">Kivy Namespaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.behaviors.togglebutton.html">ToggleButton Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.behaviors.touchripple.html">Touch Ripple</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.boxlayout.html">Box Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.bubble.html">Bubble</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.button.html">Button</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.camera.html">Camera</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.carousel.html">Carousel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.checkbox.html">CheckBox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.codeinput.html">Code Input</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.colorpicker.html">Color Picker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.dropdown.html">Drop-Down List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.effectwidget.html">EffectWidget</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.filechooser.html">FileChooser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.floatlayout.html">Float Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.gesturesurface.html">Gesture Surface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.gridlayout.html">Grid Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.image.html">Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.label.html">Label</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.layout.html">Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.modalview.html">ModalView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.pagelayout.html">PageLayout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.popup.html">Popup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.progressbar.html">Progress Bar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.recycleboxlayout.html">RecycleBoxLayout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.recyclegridlayout.html">RecycleGridLayout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.recyclelayout.html">RecycleLayout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.recycleview.html">RecycleView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.recycleview.datamodel.html">RecycleView Data Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.recycleview.layout.html">RecycleView Layouts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.recycleview.views.html">RecycleView Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.relativelayout.html">Relative Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.rst.html">reStructuredText renderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.sandbox.html">Sandbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.scatter.html">Scatter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.scatterlayout.html">Scatter Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.screenmanager.html">Screen Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.scrollview.html">ScrollView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.settings.html">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.slider.html">Slider</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.spinner.html">Spinner</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.splitter.html">Splitter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.stacklayout.html">Stack Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.stencilview.html">Stencil View</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.switch.html">Switch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.tabbedpanel.html">TabbedPanel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.textinput.html">Text Input</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.togglebutton.html">Toggle button</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.treeview.html">Tree View</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.video.html">Video</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.videoplayer.html">Video player</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.vkeyboard.html">VKeyboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.uix.widget.html">Widget class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.utils.html">Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.vector.html">Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.weakmethod.html">Weak Method</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-kivy.weakproxy.html">Weak Proxy</a></li>
</ul>
</li>
</ul>

          <!--
          <h3>Related Topics</h3>
          <ul>
              <li>Previous: <a href="pong.html" title="previous chapter">–û–±—É—á–∞—é—â–∞—è –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ –ò–≥—Ä–µ –≤ –ü–æ–Ω–≥</a></li>
              <li>Next: <a href="crashcourse.html" title="next chapter">–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–π –ö—É—Ä—Å</a></li>
          </ul>
          -->
        </div>
      </div>
  <div id="content">
    <div class="wrapper">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            <div class="toc"><h2>–û–≥–ª–∞–≤–ª–µ–Ω–∏–µ</h2><ul>
<li><a class="reference internal" href="#">–ü—Ä–æ—Å—Ç–æ–µ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –†–∏—Å–æ–≤–∞–Ω–∏—è</a><ul>
<li><a class="reference internal" href="#basic-considerations">Basic Considerations</a></li>
<li><a class="reference internal" href="#paint-widget">Paint Widget</a><ul>
<li><a class="reference internal" href="#initial-structure">Initial Structure</a></li>
<li><a class="reference internal" href="#adding-behaviour">Adding Behaviour</a></li>
<li><a class="reference internal" href="#bonus-points">Bonus Points</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
            
  <section id="a-simple-paint-app">
<h1>–ü—Ä–æ—Å—Ç–æ–µ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –†–∏—Å–æ–≤–∞–Ω–∏—è<a class="headerlink" href="#a-simple-paint-app" title="Permalink to this headline">¬∂</a></h1>
<p>In the following tutorial, you will be guided through the creation of your
first widget. This provides powerful and important knowledge when
programming Kivy applications, as it lets you create completely new user
interfaces with custom elements for your specific purpose.</p>
<section id="basic-considerations">
<h2>Basic Considerations<a class="headerlink" href="#basic-considerations" title="Permalink to this headline">¬∂</a></h2>
<p>When creating an application, you have to ask yourself three important questions:</p>
<blockquote>
<div><ul class="simple">
<li><p>What data does my application process?</p></li>
<li><p>How do I visually represent that data?</p></li>
<li><p>How does the user interact with that data?</p></li>
</ul>
</div></blockquote>
<p>If you want to write a very simple line drawing application for example, you
most likely want the user to just draw on the screen with his/her fingers.
That‚Äôs how the user <em>interacts</em> with your application. While doing so,
your application would memorize the positions where the user‚Äôs finger were,
so that you can later draw lines between those positions. So the points
where the fingers were would be your <em>data</em> and the lines that you draw
between them would be your <em>visual representation</em>.</p>
<p>In Kivy, an application‚Äôs user interface is composed of Widgets. Everything
that you see on the screen is somehow drawn by a widget. Often you would
like to be able to reuse code that you already wrote in a different
context, which is why widgets typically represent one specific instance
that answers the three questions above. A widget encapsulates data,
defines the user‚Äôs interaction with that data and draws its visual
representation.
You can build anything from simple to complex user interfaces by
nesting widgets. There are many widgets built in, such as buttons, sliders
and other common stuff. In many cases, however, you need a custom widget
that is beyond the scope of what is shipped with Kivy (e.g. a
medical visualization widget).</p>
<p>So keep these three questions in mind when you design your widgets. Try to
write them in a minimal and reusable manner (i.e. a widget does exactly
what its supposed to do and nothing more. If you need more, write more
widgets or compose other widgets of smaller widgets. We try to adhere to the
<a class="reference external" href="http://en.wikipedia.org/wiki/Single_responsibility_principle">Single Responsibility Principle</a>).</p>
</section>
<section id="paint-widget">
<h2>Paint Widget<a class="headerlink" href="#paint-widget" title="Permalink to this headline">¬∂</a></h2>
<p>We‚Äôre sure one of your childhood dreams has always been creating your own
multitouch paint program. Allow us to help you achieve that. In the
following sections you will successively learn how to write a program like
that using Kivy. Make sure that you have read and understood
<a class="reference internal" href="../guide/basic.html#quickstart"><span class="std std-ref">Create an application</span></a>. You have? Great! Let‚Äôs get started!</p>
<section id="initial-structure">
<h3>Initial Structure<a class="headerlink" href="#initial-structure" title="Permalink to this headline">¬∂</a></h3>
<p>Let‚Äôs start by writing the very basic code structure that we need.  By the way,
all the different pieces of code that are used in this section are also
available in the <code class="docutils literal notranslate"><span class="pre">examples/guide/firstwidget</span></code> directory that comes with Kivy,
so you don‚Äôt need to copy &amp; paste it all the time.
Here is the basic code skeleton that we will need:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">kivy.app</span> <span class="kn">import</span> <span class="n">App</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">kivy.uix.widget</span> <span class="kn">import</span> <span class="n">Widget</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="k">class</span> <span class="nc">MyPaintWidget</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
<span class="linenos"> 6</span>    <span class="k">pass</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="k">class</span> <span class="nc">MyPaintApp</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
<span class="linenos">10</span>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">11</span>        <span class="k">return</span> <span class="n">MyPaintWidget</span><span class="p">()</span>
<span class="linenos">12</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">15</span>    <span class="n">MyPaintApp</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>This is actually really simple. Save it as paint.py.
If you run it, you should only see a black screen.
As you can see, instead of using a built-in widget such as a Button (see
<a class="reference internal" href="../guide/basic.html#quickstart"><span class="std std-ref">Create an application</span></a>), we are going to write our own widget to do the drawing.
We do that by creating a class that inherits from
<a class="reference internal" href="../api-kivy.uix.widget.html#kivy.uix.widget.Widget" title="kivy.uix.widget.Widget"><code class="xref py py-class docutils literal notranslate"><span class="pre">Widget</span></code></a> (line 5-6) and although that class does nothing
yet, we can still treat it like a normal Kivy widget (line 11).
The <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__</span> <span class="pre">...</span></code> construct (line 14) is a Python mechanism that prevents
you from executing the code in the if-statement when importing from the file,
i.e. if you write <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">paint</span></code>, it won‚Äôt do something unexpected but
just nicely provide the classes defined in the file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You may be wondering why you have to import App and Widget separately,
instead of doing something like <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">kivy</span> <span class="pre">import</span> <span class="pre">*</span></code>. While shorter,
this would have the disadvantage of <a class="reference external" href="http://en.wikipedia.org/wiki/Namespace_%28computer_science%29#Python">polluting  your namespace</a>
and make the start of the application potentially much slower.
It can also introduce ambiguity into class and variable naming,
so is generally frowned upon in the Python community. The way we do it is
faster and cleaner.</p>
</div>
</section>
<section id="adding-behaviour">
<h3>Adding Behaviour<a class="headerlink" href="#adding-behaviour" title="Permalink to this headline">¬∂</a></h3>
<p>Let‚Äôs now add some actual behaviour to the widget, i.e. make it react to user
input. Change the code like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">kivy.app</span> <span class="kn">import</span> <span class="n">App</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">kivy.uix.widget</span> <span class="kn">import</span> <span class="n">Widget</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="k">class</span> <span class="nc">MyPaintWidget</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
<span class="linenos"> 6</span>    <span class="k">def</span> <span class="nf">on_touch_down</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">touch</span><span class="p">):</span>
<span class="linenos"> 7</span>        <span class="nb">print</span><span class="p">(</span><span class="n">touch</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="k">class</span> <span class="nc">MyPaintApp</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
<span class="linenos">11</span>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">12</span>        <span class="k">return</span> <span class="n">MyPaintWidget</span><span class="p">()</span>
<span class="linenos">13</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">16</span>    <span class="n">MyPaintApp</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>This is just to show how easy it is to react to user input. When a
<a class="reference internal" href="../api-kivy.input.motionevent.html#kivy.input.motionevent.MotionEvent" title="kivy.input.motionevent.MotionEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">MotionEvent</span></code></a> (i.e. a touch, click, etc.) occurs,
we simply print the information about the touch object to the console.
You won‚Äôt see anything on the screen, but if you observe the command-line from
which you are running the program, you will see a message for every touch.
This also demonstrates that a widget does not have to
have a visual representation.</p>
<p>Now that‚Äôs not really an overwhelming user experience. Let‚Äôs add some code
that actually draws something into our window:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">kivy.app</span> <span class="kn">import</span> <span class="n">App</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">kivy.uix.widget</span> <span class="kn">import</span> <span class="n">Widget</span>
<span class="linenos"> 3</span><span class="kn">from</span> <span class="nn">kivy.graphics</span> <span class="kn">import</span> <span class="n">Color</span><span class="p">,</span> <span class="n">Ellipse</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">class</span> <span class="nc">MyPaintWidget</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>    <span class="k">def</span> <span class="nf">on_touch_down</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">touch</span><span class="p">):</span>
<span class="linenos"> 9</span>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">:</span>
<span class="linenos">10</span>            <span class="n">Color</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">11</span>            <span class="n">d</span> <span class="o">=</span> <span class="mf">30.</span>
<span class="linenos">12</span>            <span class="n">Ellipse</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">d</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">d</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span>
<span class="linenos">13</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="k">class</span> <span class="nc">MyPaintApp</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
<span class="linenos">16</span>
<span class="linenos">17</span>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">18</span>        <span class="k">return</span> <span class="n">MyPaintWidget</span><span class="p">()</span>
<span class="linenos">19</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">22</span>    <span class="n">MyPaintApp</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/guide-3.jpg" class="align-center" src="../_images/guide-3.jpg" />
<p>If you run your code with these modifications, you will see that every time
you touch, there will be a small yellow circle drawn where you touched.
How does it work?</p>
<blockquote>
<div><ul class="simple">
<li><p>Line 9: We use Python‚Äôs <code class="docutils literal notranslate"><span class="pre">with</span></code> statement with the widget‚Äôs
<a class="reference internal" href="../api-kivy.graphics.instructions.html#kivy.graphics.instructions.Canvas" title="kivy.graphics.instructions.Canvas"><code class="xref py py-class docutils literal notranslate"><span class="pre">Canvas</span></code></a> object. This is like an
area in which the widget can draw things to represent itself on the
screen. By using the <code class="docutils literal notranslate"><span class="pre">with</span></code> statement with it, all successive
drawing commands that are properly indented will modify this canvas.
The <code class="docutils literal notranslate"><span class="pre">with</span></code> statement also makes sure that after our drawing,
internal state can be cleaned up properly.</p></li>
<li><p>Line 10: You might have guessed it already: This sets the
<a class="reference internal" href="../api-kivy.graphics.context_instructions.html#kivy.graphics.context_instructions.Color" title="kivy.graphics.context_instructions.Color"><code class="xref py py-class docutils literal notranslate"><span class="pre">Color</span></code></a> for successive
drawing operations to yellow (default color format is RGB, so (1, 1, 0) is
yellow). This is true until another
<a class="reference internal" href="../api-kivy.graphics.context_instructions.html#kivy.graphics.context_instructions.Color" title="kivy.graphics.context_instructions.Color"><code class="xref py py-class docutils literal notranslate"><span class="pre">Color</span></code></a> is set.
Think of this as dipping your brushes in that color, which you can
then use to draw on a canvas until you dip the brushes into another color.</p></li>
<li><p>Line 11: We specify the diameter for the circle that we are about to
draw. Using a variable for that is preferable since we need to refer
to that value multiple times and we don‚Äôt want to have to change it
in several places if we want the circle bigger or smaller.</p></li>
<li><p>Line 12: To draw a circle, we simply draw an
<a class="reference internal" href="../api-kivy.graphics.vertex_instructions.html#kivy.graphics.vertex_instructions.Ellipse" title="kivy.graphics.vertex_instructions.Ellipse"><code class="xref py py-class docutils literal notranslate"><span class="pre">Ellipse</span></code></a> with equal width
and height. Since we want the circle to be drawn where the user
touches, we pass the touch‚Äôs position to the ellipse.
Note that we need to shift the ellipse by <code class="docutils literal notranslate"><span class="pre">-d/2</span></code> in the x and y
directions (i.e. left and downwards) because the position specifies the
bottom left corner of the ellipse‚Äôs bounding box, and we want it to be
centered around our touch.</p></li>
</ul>
</div></blockquote>
<p>That was easy, wasn‚Äôt it?
It gets better! Update the code to look like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">kivy.app</span> <span class="kn">import</span> <span class="n">App</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">kivy.uix.widget</span> <span class="kn">import</span> <span class="n">Widget</span>
<span class="linenos"> 3</span><span class="kn">from</span> <span class="nn">kivy.graphics</span> <span class="kn">import</span> <span class="n">Color</span><span class="p">,</span> <span class="n">Ellipse</span><span class="p">,</span> <span class="n">Line</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">class</span> <span class="nc">MyPaintWidget</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>    <span class="k">def</span> <span class="nf">on_touch_down</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">touch</span><span class="p">):</span>
<span class="linenos"> 9</span>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">:</span>
<span class="linenos">10</span>            <span class="n">Color</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">11</span>            <span class="n">d</span> <span class="o">=</span> <span class="mf">30.</span>
<span class="linenos">12</span>            <span class="n">Ellipse</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">d</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">d</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span>
<span class="linenos">13</span>            <span class="n">touch</span><span class="o">.</span><span class="n">ud</span><span class="p">[</span><span class="s1">&#39;line&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="p">(</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
<span class="linenos">14</span>
<span class="linenos">15</span>    <span class="k">def</span> <span class="nf">on_touch_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">touch</span><span class="p">):</span>
<span class="linenos">16</span>        <span class="n">touch</span><span class="o">.</span><span class="n">ud</span><span class="p">[</span><span class="s1">&#39;line&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">points</span> <span class="o">+=</span> <span class="p">[</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span><span class="p">]</span>
<span class="linenos">17</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="k">class</span> <span class="nc">MyPaintApp</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
<span class="linenos">20</span>
<span class="linenos">21</span>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">22</span>        <span class="k">return</span> <span class="n">MyPaintWidget</span><span class="p">()</span>
<span class="linenos">23</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">26</span>    <span class="n">MyPaintApp</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/guide-4.jpg" class="align-center" src="../_images/guide-4.jpg" />
<dl class="simple">
<dt>This is what has changed:</dt><dd><ul class="simple">
<li><p>Line 3: We now not only import the
<a class="reference internal" href="../api-kivy.graphics.vertex_instructions.html#kivy.graphics.vertex_instructions.Ellipse" title="kivy.graphics.vertex_instructions.Ellipse"><code class="xref py py-class docutils literal notranslate"><span class="pre">Ellipse</span></code></a> drawing instruction,
but also the <a class="reference internal" href="../api-kivy.graphics.vertex_instructions.html#kivy.graphics.vertex_instructions.Line" title="kivy.graphics.vertex_instructions.Line"><code class="xref py py-class docutils literal notranslate"><span class="pre">Line</span></code></a>
drawing instruction. If you look at the documentation for
<a class="reference internal" href="../api-kivy.graphics.vertex_instructions.html#kivy.graphics.vertex_instructions.Line" title="kivy.graphics.vertex_instructions.Line"><code class="xref py py-class docutils literal notranslate"><span class="pre">Line</span></code></a>, you will see that
it accepts a <code class="docutils literal notranslate"><span class="pre">points</span></code> argument that has to be a list of 2D point
coordinates, like <code class="docutils literal notranslate"><span class="pre">(x1,</span> <span class="pre">y1,</span> <span class="pre">x2,</span> <span class="pre">y2,</span> <span class="pre">...,</span> <span class="pre">xN,</span> <span class="pre">yN)</span></code>.</p></li>
<li><p>Line 13: This is where it gets interesting. <code class="docutils literal notranslate"><span class="pre">touch.ud</span></code> is a Python
dictionary (type &lt;dict&gt;) that allows us to store <em>custom attributes</em>
for a touch.</p></li>
<li><p>Line 13: We make use of the Line instruction that we imported and
set a Line up for drawing. Since this is done in <code class="docutils literal notranslate"><span class="pre">on_touch_down</span></code>,
there will be a new line for every new touch. By creating the line
inside the <code class="docutils literal notranslate"><span class="pre">with</span></code> block, the canvas automatically knows about the
line and will draw it. We just want to modify the line later, so we
store a reference to it in the <code class="docutils literal notranslate"><span class="pre">touch.ud</span></code> dictionary under the
arbitrarily chosen but aptly named key ‚Äòline‚Äô.
We pass the line that we‚Äôre creating the initial touch position
because that‚Äôs where our line will begin.</p></li>
<li><p>Lines 15: We add a new method to our widget. This is similar to the
<code class="docutils literal notranslate"><span class="pre">on_touch_down</span></code> method, but instead of being called when a <em>new</em>
touch occurs, this method is being called when an <em>existing</em> touch
(for which <code class="docutils literal notranslate"><span class="pre">on_touch_down</span></code> was already called) moves, i.e. its
position changes. Note that this is the <strong>same</strong>
<a class="reference internal" href="../api-kivy.input.motionevent.html#kivy.input.motionevent.MotionEvent" title="kivy.input.motionevent.MotionEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">MotionEvent</span></code></a> object with updated
attributes. This is something we found incredibly handy and you will
shortly see why.</p></li>
<li><p>Line 16: Remember: This is the same touch object that we got in
<code class="docutils literal notranslate"><span class="pre">on_touch_down</span></code>, so we can simply access the data we stored away
in the <code class="docutils literal notranslate"><span class="pre">touch.ud</span></code> dictionary!
To the line we set up for this touch earlier, we now add the current
position of the touch as a new point. We know that we need to extend
the line because this happens in <code class="docutils literal notranslate"><span class="pre">on_touch_move</span></code>, which is only
called when the touch has moved, which is exactly why we want to
update the line.
Storing the line in the <code class="docutils literal notranslate"><span class="pre">touch.ud</span></code> makes it a whole lot
easier for us as we don‚Äôt have to maintain our own touch-to-line
bookkeeping.</p></li>
</ul>
</dd>
</dl>
<p>So far so good. This isn‚Äôt exactly beautiful yet, though. It looks a bit
like spaghetti bolognese. How about giving each touch its own color?
Great, let‚Äôs do it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">kivy.app</span> <span class="kn">import</span> <span class="n">App</span>
<span class="linenos"> 3</span><span class="kn">from</span> <span class="nn">kivy.uix.widget</span> <span class="kn">import</span> <span class="n">Widget</span>
<span class="linenos"> 4</span><span class="kn">from</span> <span class="nn">kivy.graphics</span> <span class="kn">import</span> <span class="n">Color</span><span class="p">,</span> <span class="n">Ellipse</span><span class="p">,</span> <span class="n">Line</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="k">class</span> <span class="nc">MyPaintWidget</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span>    <span class="k">def</span> <span class="nf">on_touch_down</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">touch</span><span class="p">):</span>
<span class="linenos">10</span>        <span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="n">random</span><span class="p">(),</span> <span class="n">random</span><span class="p">(),</span> <span class="n">random</span><span class="p">())</span>
<span class="linenos">11</span>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">:</span>
<span class="linenos">12</span>            <span class="n">Color</span><span class="p">(</span><span class="o">*</span><span class="n">color</span><span class="p">)</span>
<span class="linenos">13</span>            <span class="n">d</span> <span class="o">=</span> <span class="mf">30.</span>
<span class="linenos">14</span>            <span class="n">Ellipse</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">d</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">d</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span>
<span class="linenos">15</span>            <span class="n">touch</span><span class="o">.</span><span class="n">ud</span><span class="p">[</span><span class="s1">&#39;line&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="p">(</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
<span class="linenos">16</span>
<span class="linenos">17</span>    <span class="k">def</span> <span class="nf">on_touch_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">touch</span><span class="p">):</span>
<span class="linenos">18</span>        <span class="n">touch</span><span class="o">.</span><span class="n">ud</span><span class="p">[</span><span class="s1">&#39;line&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">points</span> <span class="o">+=</span> <span class="p">[</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span><span class="p">]</span>
<span class="linenos">19</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="k">class</span> <span class="nc">MyPaintApp</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
<span class="linenos">22</span>
<span class="linenos">23</span>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">24</span>        <span class="k">return</span> <span class="n">MyPaintWidget</span><span class="p">()</span>
<span class="linenos">25</span>
<span class="linenos">26</span>
<span class="linenos">27</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">28</span>    <span class="n">MyPaintApp</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/guide-5.jpg" class="align-center" src="../_images/guide-5.jpg" />
<p>Here are the changes:</p>
<blockquote>
<div><ul class="simple">
<li><p>Line 1: We import Python‚Äôs random() function that will give us
random values in the range of [0., 1.).</p></li>
<li><p>Line 10: In this case we simply create a new tuple of 3 random
float values that will represent a random RGB color. Since we do
this in <code class="docutils literal notranslate"><span class="pre">on_touch_down</span></code>, every new touch will get its own color.
Don‚Äôt get confused by the use of
<a class="reference external" href="http://docs.python.org/2/tutorial/datastructures.html#tuples-and-sequences">tuples</a>.
We‚Äôre just binding the tuple to <code class="docutils literal notranslate"><span class="pre">color</span></code> for use as a shortcut
within this method because we‚Äôre lazy.</p></li>
<li><p>Line 12: As before, we set the color for the canvas. Only this time
we use the random values we generated and feed them to the color
class using Python‚Äôs tuple unpacking syntax (since the Color class
expects three individual color components instead of just 1. If we
were to pass the tuple directly, that would be just 1 value being
passed, regardless of the fact that the tuple itself contains 3
values).</p></li>
</ul>
</div></blockquote>
<p>This looks a lot nicer already! With a lot of skill and patience, you
might even be able to create a nice little drawing!</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since by default the <a class="reference internal" href="../api-kivy.graphics.context_instructions.html#kivy.graphics.context_instructions.Color" title="kivy.graphics.context_instructions.Color"><code class="xref py py-class docutils literal notranslate"><span class="pre">Color</span></code></a>
instructions assume RGB mode and we‚Äôre feeding a tuple with three
random float values to it, it might very well happen that we end up
with a lot of dark or even black colors if we are unlucky. That would
be bad because by default the background color is dark as well, so you
wouldn‚Äôt be able to (easily) see the lines you draw.
There is a nice trick to prevent this: Instead of creating a tuple with
three random values, create a tuple like this: <code class="docutils literal notranslate"><span class="pre">(random(),</span> <span class="pre">1.,</span> <span class="pre">1.)</span></code>.
Then, when passing it to the color instruction, set the mode to HSV
color space: <code class="docutils literal notranslate"><span class="pre">Color(*color,</span> <span class="pre">mode='hsv')</span></code>. This way you will have a
smaller number of possible colors, but the colors that you get will
always be equally bright: only the hue changes.</p>
</div>
</section>
<section id="bonus-points">
<h3>Bonus Points<a class="headerlink" href="#bonus-points" title="Permalink to this headline">¬∂</a></h3>
<p>At this point, we could say we are done. The widget does what it‚Äôs
supposed to do: it traces the touches and draws lines. It even draws
circles at the positions where a line begins.</p>
<p>But what if the user wants to start a new drawing? With the current code,
the only way to clear the window would be to restart the entire application.
Luckily, we can do better. Let us add a <em>Clear</em> button that erases all the
lines and circles that have been drawn so far.
There are two options now:</p>
<blockquote>
<div><ul class="simple">
<li><p>We could either create the button as a child of our widget. That would
imply that if you create more than one widget, every widget gets its own
button. If you‚Äôre not careful, this will also allow users to draw on top
of the button, which might not be what you want.</p></li>
<li><p>Or we set up the button only once, initially, in our app class and
when it‚Äôs pressed we clear the widget.</p></li>
</ul>
</div></blockquote>
<p>For our simple example, it doesn‚Äôt really matter that much. For larger
applications you should give some thought to who does what in your app.
We‚Äôll go with the second option here so that you see how you can build up
your application‚Äôs widget tree in your app class‚Äôs <a class="reference internal" href="../api-kivy.app.html#kivy.app.App.build" title="kivy.app.App.build"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build()</span></code></a>
method. We‚Äôll also change to the HSV color space (see preceding note):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">kivy.app</span> <span class="kn">import</span> <span class="n">App</span>
<span class="linenos"> 3</span><span class="kn">from</span> <span class="nn">kivy.uix.widget</span> <span class="kn">import</span> <span class="n">Widget</span>
<span class="linenos"> 4</span><span class="kn">from</span> <span class="nn">kivy.uix.button</span> <span class="kn">import</span> <span class="n">Button</span>
<span class="linenos"> 5</span><span class="kn">from</span> <span class="nn">kivy.graphics</span> <span class="kn">import</span> <span class="n">Color</span><span class="p">,</span> <span class="n">Ellipse</span><span class="p">,</span> <span class="n">Line</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="k">class</span> <span class="nc">MyPaintWidget</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span>    <span class="k">def</span> <span class="nf">on_touch_down</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">touch</span><span class="p">):</span>
<span class="linenos">11</span>        <span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="n">random</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">12</span>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">:</span>
<span class="linenos">13</span>            <span class="n">Color</span><span class="p">(</span><span class="o">*</span><span class="n">color</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;hsv&#39;</span><span class="p">)</span>
<span class="linenos">14</span>            <span class="n">d</span> <span class="o">=</span> <span class="mf">30.</span>
<span class="linenos">15</span>            <span class="n">Ellipse</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">d</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">d</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span>
<span class="linenos">16</span>            <span class="n">touch</span><span class="o">.</span><span class="n">ud</span><span class="p">[</span><span class="s1">&#39;line&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="p">(</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
<span class="linenos">17</span>
<span class="linenos">18</span>    <span class="k">def</span> <span class="nf">on_touch_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">touch</span><span class="p">):</span>
<span class="linenos">19</span>        <span class="n">touch</span><span class="o">.</span><span class="n">ud</span><span class="p">[</span><span class="s1">&#39;line&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">points</span> <span class="o">+=</span> <span class="p">[</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span><span class="p">]</span>
<span class="linenos">20</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="k">class</span> <span class="nc">MyPaintApp</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
<span class="linenos">23</span>
<span class="linenos">24</span>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">25</span>        <span class="n">parent</span> <span class="o">=</span> <span class="n">Widget</span><span class="p">()</span>
<span class="linenos">26</span>        <span class="bp">self</span><span class="o">.</span><span class="n">painter</span> <span class="o">=</span> <span class="n">MyPaintWidget</span><span class="p">()</span>
<span class="linenos">27</span>        <span class="n">clearbtn</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Clear&#39;</span><span class="p">)</span>
<span class="linenos">28</span>        <span class="n">clearbtn</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">on_release</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">clear_canvas</span><span class="p">)</span>
<span class="linenos">29</span>        <span class="n">parent</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">painter</span><span class="p">)</span>
<span class="linenos">30</span>        <span class="n">parent</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">clearbtn</span><span class="p">)</span>
<span class="linenos">31</span>        <span class="k">return</span> <span class="n">parent</span>
<span class="linenos">32</span>
<span class="linenos">33</span>    <span class="k">def</span> <span class="nf">clear_canvas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
<span class="linenos">34</span>        <span class="bp">self</span><span class="o">.</span><span class="n">painter</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="linenos">35</span>
<span class="linenos">36</span>
<span class="linenos">37</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">38</span>    <span class="n">MyPaintApp</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/guide-6.jpg" class="align-center" src="../_images/guide-6.jpg" />
<p>Here‚Äôs what happens:</p>
<blockquote>
<div><ul class="simple">
<li><p>Line 4: We added an import statement to be able to use the
<a class="reference internal" href="../api-kivy.uix.button.html#kivy.uix.button.Button" title="kivy.uix.button.Button"><code class="xref py py-class docutils literal notranslate"><span class="pre">Button</span></code></a> class.</p></li>
<li><p>Line 25: We create a dummy <code class="docutils literal notranslate"><span class="pre">Widget()</span></code> object as a parent for both
our painting widget and the button we‚Äôre about to add. This is just
a poor-man‚Äôs approach to setting up a widget tree hierarchy. We
could just as well use a layout or do some other fancy stuff.
Again: this widget does absolutely nothing except holding the two
widgets we will now add to it as children.</p></li>
<li><p>Line 26: We create our <code class="docutils literal notranslate"><span class="pre">MyPaintWidget()</span></code> as usual, only this time
we don‚Äôt return it directly but bind it to a variable name.</p></li>
<li><p>Line 27: We create a button widget. It will have a label on it that
displays the text ‚ÄòClear‚Äô.</p></li>
<li><p>Line 28: We then bind the button‚Äôs on_release event (which is fired when
the button is pressed and then released) to the
<a class="reference external" href="http://en.wikipedia.org/wiki/Callback_function#Python">callback function</a>
<cite>clear_canvas</cite> defined on below on Lines 33 &amp; 34.</p></li>
<li><p>Line 29 &amp; 30: We set up the widget hierarchy by making both the
painter and the clearbtn children of the dummy parent widget.
That means <cite>painter</cite> and <cite>clearbtn</cite> are now siblings in the usual computer
science tree terminology.</p></li>
<li><p>Line 33 &amp; 34: Up to now, the button did nothing. It was there,
visible, and you could press it, but nothing would happen.
We change that here: we create a small, throw-away function that is
going to be our
<a class="reference external" href="http://en.wikipedia.org/wiki/Callback_function#Python">callback function</a>
when the button is pressed. The function just clears the painter‚Äôs
canvas‚Äô contents, making it black again.</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Kivy Widget class, by design, is kept simple. There are no general
properties such as background color and border color. Instead, the examples
and documentation illustrate how to easily handle such simple things
yourself, as we have done here, setting the color for the canvas, and
drawing the shape. From a simple start, you can move to more elaborate
customization. Higher-level built-in widgets, deriving from Widget, such
as Button, do have convenience properties such as background_color, but
these vary by widget. Use the API docs to see what is offered by a widget,
and subclass if you need to add more functionality.</p>
</div>
<p>Congratulations! You‚Äôve written your first Kivy widget. Obviously this was
just a quick introduction. There is much more to discover. We suggest
taking a short break to let what you just learned sink in. Maybe draw some
nice pictures to relax? If you feel like you‚Äôve understood everything and
are ready for more, we encourage you to read on.</p>
</section>
</section>
</section>


            <div class="footerlinks">
            <table>
                <tr>
                    <td class="leftlink">
                  <a href="pong.html" title="previous chapter">&laquo; Pong Game Tutorial</a></li>
                  </td>
                  <td class="rightlink">
                  <a href="crashcourse.html" title="next chapter">Crash Course &raquo;</a>
                      </td>
                  </tr>
              </table>
              </div>
          </div>
        </div>
      </div>
    </div>
    <div class="clearer"></div>
  </div>
</div>
<!-- Piwik -->
<script>
  var selector = $("#version_selector");

  selector.on('change', function() {
    // replace the version part of the url with the selected version
    document.location.pathname = document.location.pathname.replace(
      /^(\/.*?\/).*?(\/.*)/,
     '$1' + this.value + '$2'
    );
  });

  var url = "/doc/versions.json";

  $.getJSON(url, function(versions) {
    versions.forEach(function(version){
      var current = window.location.pathname.split('/')[2]
      selector.append(
        $("<option " + (version == current ? "selected" : "") + "/>").val(version).html(version)
      );
    });
  });
</script>
<!-- End Piwik Tracking Code -->
    <!--
    <div class="footer">
      &copy; Copyright 2010, The Kivy Authors.
      Last updated on Mar 06, 2022.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 4.4.0.
</div>
-->
  </body>
</html>